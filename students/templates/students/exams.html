{% extends "students/base.html" %}

{% load static from staticfiles %}

{% block meta_title %}Іспити{% endblock meta_title %}

{% block title %}Іспити{% endblock title %}
{% block add_button %}
<!-- Add Group Button -->
<a class="btn btn-primary form-link"
   href="{% url "exams_add" %}">Додати Іспит</a>
{% endblock add_button %}

{% block content %}
          
{% if context.exams %}

<!-- Start Group Listing -->
<table class="table table-hover table-striped">
  <thead>
    <tr>
      {% with order_by=request.GET.order_by reverse=request.GET.reverse %}
      <th>№</th>
      <th><a href=
             "{% url "exams" %}?order_by=name{% if order_by == 'name' and reverse != '1' %}&amp;reverse=1{% endif %}">
             Предмет {% if order_by == 'name' and reverse != '1' %}
             &uarr;{% elif order_by == 'name' and reverse == '1' %}
             &darr;{% endif %}</a></th>
      <th><a href=
             "{% url "exams" %}?order_by=date{% if order_by == 'date' and reverse != '1' or order_by == '' %}&amp;reverse=1{% endif %}">
             Дата проведення {% if order_by == 'date' and reverse != '1' or order_by == '' %}
             &uarr;{% elif order_by == 'date' and reverse == '1' %}
             &darr;{% endif %}</a></th>
      <th><a href=
             "{% url "exams" %}?order_by=teacher_name{% if order_by == 'teacher_name' and reverse != '1' %}&amp;reverse=1{% endif %}">
             Викладач {% if order_by == 'teacher_name' and reverse != '1' %}
             &uarr;{% elif order_by == 'teacher_name' and reverse == '1' %}
             &darr;{% endif %}</a></th>
      <th><a href=
             "{% url "exams" %}?order_by=exam_group__title{% if order_by == 'exam_group__title' and reverse != '1' %}&amp;reverse=1{% endif %}">
             Група {% if order_by == 'exam_group__title' and reverse != '1' %}
             &uarr;{% elif order_by == 'exam_group__title' and reverse == '1' %}
             &darr;{% endif %}</a></th>
      <th>Дії</th>
    {% endwith %}
    </tr>
  </thead>
  <tbody>
    
    {% for exam in context.exams %}
    <!-- Test Group-->
    <tr>
      <td>{{ context.page_obj.start_index|add:forloop.counter|add:"-1" }}</td>
      <td><a href="{% url "exams_edit" exam.id %}"
             class="form-link">{{ exam.name }}</a></td>
      <td>{{ exam.date }}</td>
      <td>{{ exam.teacher_name }}</td>
      <td><a href="{% url "groups_edit" exam.exam_group.id %}"
             class="form-link">
        {{ exam.exam_group.title }}</a></td>
      <td>
        <div class="dropdown">
          <button class="btn btn-default dropdown-toggle" 
                  type="button" data-toggle="dropdown" >Дія
            <span class="caret"></span>
          </button>
          <ul class="dropdown-menu" 
              aria-labelledby="dropdownMenu1">
            <li><a href="{% url "exams_edit" exam.id %}"
                   class="form-link">Редагувати</a></li>
            <li><a href="{% url "exams_delete" exam.id %}"
                   class="form-link">Видалити</a></li>
          </ul>
        </div>
      </td>
    </tr>
    
    {% endfor %}
    
  </tbody>
</table>
<!-- End Groups Listing -->

{% else %}
<p class='none'>Поки немає іспитів у базі</p>
{% endif %}

{% with paginator=context.paginator page_obj=context.page_obj is_paginated=context.is_paginated %}
{% include 'students/pagination.html' %}
{% endwith %}
        
{% endblock content %}
